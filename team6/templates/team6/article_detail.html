{% extends "team6/base.html" %}
{% block title %}{{ article.title_fa }}{% endblock %}

{% block content %}

<h2>{{ article.title_fa }}
    {% if article.title_en %}
        <small class="text-muted">({{ article.title_en }})</small>
    {% endif %}
</h2>

<div class="mb-3 text-muted">
    <i class="fa-solid fa-folder"></i> دسته: {{ article.category.title_fa }} | 
    <i class="fa-solid fa-eye"></i> بازدید: {{ article.view_count|default:0 }} |
    <i class="fa-solid fa-calendar"></i> تاریخ ایجاد: {{ article.created_at|date:"Y/m/d" }}
</div>

<div class="card p-4 mb-4" style="border-right: 4px solid #4CAF50;">
    {{ article.body_fa|linebreaks }}
</div>

<div class="d-flex gap-2">
    {% if request.user.is_authenticated and article.author_user_id == request.user.id %}
    <div class="d-flex gap-2">
        <a href="{% url 'team6:article_edit' article.slug %}" class="btn btn-warning">
            <i class="fa-solid fa-edit"></i> ویرایش مقاله
        </a>
        <a href="{% url 'team6:article_delete' article.slug %}" class="btn btn-danger">
                <i class="fa fa-trash"></i> حذف مقاله
            </a>

        </div>
    {% endif %}
    
    <a href="{% url 'team6:article_revisions' article.slug %}" class="btn btn-info">
        <i class="fa-solid fa-history"></i> تاریخچه نسخه‌ها
    </a>
    
    <!-- گزارش تخلف با slug -->
    <a href="{% url 'team6:article_report' article.slug %}" class="btn btn-danger">
        <i class="fa-solid fa-flag"></i> گزارش تخلف
    </a>
</div>

<hr class="my-4">

<div class="card">
    <div class="card-header bg-light">
        <i class="fa-solid fa-info-circle"></i> اطلاعات مقاله
    </div>
    <div class="card-body">
        <p><strong>نام مکان:</strong> {{ article.place_name|default:"ثبت نشده" }}</p>
        <p><strong>خلاصه:</strong> {{ article.summary|default:"خلاصه‌ای ثبت نشده است" }}</p>
        <p><strong>شناسه مقاله:</strong> 
            {% if article.id_article %}
                {{ article.id_article }}
            {% else %}
                {{ article.slug }}
            {% endif %}
        </p>
        <p><strong>آدرس:</strong> <code>/team6/article/{{ article.slug }}/</code></p>
    </div>
</div>

{% endblock %}
